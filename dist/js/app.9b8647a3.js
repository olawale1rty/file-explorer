(function(t){function e(e){for(var a,o,r=e[0],l=e[1],d=e[2],p=0,h=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(h.length)h.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"256b":function(t,e,i){"use strict";i("583e")},4082:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var a=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-app-bar",{attrs:{app:"",color:"",dark:""}},[i("div",{staticClass:"d-flex align-center"}),i("v-spacer")],1),i("v-main",[i("File")],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-auto",attrs:{loading:t.loading>0}},[i("toolbar",{attrs:{path:t.path,storages:t.storagesArray,storage:t.activeStorage,endpoints:t.endpoints,axios:t.axiosInstance},on:{"storage-changed":t.storageChanged,"path-changed":t.pathChanged,"add-files":t.addUploadingFiles,"folder-created":function(e){t.refreshPending=!0}}}),i("v-row",{attrs:{"no-gutters":""}},[t.tree&&t.$vuetify.breakpoint.smAndUp?i("v-col",{attrs:{sm:"auto"}},[i("tree",{attrs:{path:t.path,storage:t.activeStorage,icons:t.icons,endpoints:t.endpoints,axios:t.axiosInstance,refreshPending:t.refreshPending},on:{"path-changed":t.pathChanged,loading:t.loadingChanged,refreshed:function(e){t.refreshPending=!1}}})],1):t._e(),t.tree?i("v-divider",{attrs:{vertical:""}}):t._e(),i("v-col",[i("list",{attrs:{path:t.path,storage:t.activeStorage,icons:t.icons,endpoints:t.endpoints,axios:t.axiosInstance,refreshPending:t.refreshPending},on:{"path-changed":t.pathChanged,loading:t.loadingChanged,refreshed:function(e){t.refreshPending=!1},"file-deleted":function(e){t.refreshPending=!0}}})],1)],1),!1!==t.uploadingFiles?i("upload",{attrs:{path:t.path,storage:t.activeStorage,files:t.uploadingFiles,icons:t.icons,axios:t.axiosInstance,endpoint:t.endpoints.upload,maxUploadFilesCount:t.maxUploadFilesCount,maxUploadFileSize:t.maxUploadFileSize},on:{"add-files":t.addUploadingFiles,"remove-file":t.removeUploadingFile,"clear-files":function(e){t.uploadingFiles=[]},cancel:function(e){t.uploadingFiles=!1},uploaded:t.uploaded}}):t._e()],1)},r=[],l=i("bc3a"),d=i.n(l),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{attrs:{flat:"",dense:"",color:"blue-grey lighten-5"}},[i("v-toolbar-items",[t.storages.length>1?i("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({staticClass:"storage-select-button mr-3",attrs:{icon:""}},a),[i("v-icon",[t._v("mdi-arrow-down-drop-circle-outline")])],1)]}}],null,!1,3317887409)},[i("v-list",{staticClass:"storage-select-list"},t._l(t.storages,(function(e,a){return i("v-list-item",{key:a,attrs:{disabled:e.code===t.storageObject.code},on:{click:function(i){return t.changeStorage(e.code)}}},[i("v-list-item-icon",[i("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),i("v-list-item-title",[t._v(t._s(e.name))])],1)})),1)],1):t._e(),i("v-btn",{attrs:{text:"","input-value":"/"===t.path},on:{click:function(e){return t.changePath("/")}}},[i("v-icon",{staticClass:"mr-2"},[t._v(t._s(t.storageObject.icon))]),t._v(" "+t._s(t.storageObject.name)+" ")],1),t._l(t.pathSegments,(function(e,a){return[i("v-icon",{key:a+"-icon"},[t._v("mdi-chevron-right")]),i("v-btn",{key:a+"-btn",attrs:{text:"","input-value":a===t.pathSegments.length-1},on:{click:function(i){return t.changePath(e.path)}}},[t._v(t._s(e.name))])]}))],2),i("div",{staticClass:"flex-grow-1"}),t.$vuetify.breakpoint.smAndUp?[t.pathSegments.length>0?i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{icon:""},on:{click:t.goUp}},a),[i("v-icon",[t._v("mdi-arrow-up-bold-outline")])],1)]}}],null,!1,2998795643)},[1===t.pathSegments.length?i("span",[t._v('Up to "root"')]):i("span",[t._v('Up to "'+t._s(t.pathSegments[t.pathSegments.length-2].name)+'"')])]):t._e(),i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t.path?i("v-btn",t._g({attrs:{icon:"",title:"Create Folder"}},a),[i("v-icon",[t._v("mdi-folder-plus-outline")])],1):t._e()]}}],null,!1,2571448285),model:{value:t.newFolderPopper,callback:function(e){t.newFolderPopper=e},expression:"newFolderPopper"}},[i("v-card",[i("v-card-text",[i("v-text-field",{attrs:{label:"Name","hide-details":""},model:{value:t.newFolderName,callback:function(e){t.newFolderName=e},expression:"newFolderName"}})],1),i("v-card-actions",[i("div",{staticClass:"flex-grow-1"}),i("v-btn",{attrs:{depressed:""},on:{click:function(e){t.newFolderPopper=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"success",disabled:!t.newFolderName,depressed:""},on:{click:t.mkdir}},[t._v("Create Folder")])],1)],1)],1),t.path?i("v-btn",{attrs:{icon:"",title:"Upload Files"},on:{click:function(e){return t.$refs.inputUpload.click()}}},[i("v-icon",[t._v("mdi-plus-circle")]),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file",multiple:""},on:{change:t.addFiles}})],1):t._e()]:t._e()],2)},p=[],h={props:{storages:Array,storage:String,path:String,endpoints:Object,axios:Function},data(){return{newFolderPopper:!1,newFolderName:""}},computed:{pathSegments(){let t="/",e="/"===this.path[this.path.length-1],i=this.path.split("/").filter(t=>t);return i=i.map((a,s)=>(t+=a+(s<i.length-1||e?"/":""),{name:a,path:t})),i},storageObject(){return this.storages.find(t=>t.code==this.storage)}},methods:{changeStorage(t){this.storage!=t&&(this.$emit("storage-changed",t),this.$emit("path-changed",""))},changePath(t){this.$emit("path-changed",t)},goUp(){let t=this.pathSegments,e=1===t.length?"/":t[t.length-2].path;this.changePath(e)},async addFiles(t){this.$emit("add-files",t.target.files),this.$refs.inputUpload.value=""},async mkdir(){this.$emit("loading",!0);let t=this.endpoints.mkdir.url.replace(new RegExp("{storage}","g"),this.storage).replace(new RegExp("{path}","g"),this.path+this.newFolderName),e={url:t,method:this.endpoints.mkdir.method||"post"};await this.axios.request(e),this.$emit("folder-created",this.newFolderName),this.newFolderPopper=!1,this.newFolderName="",this.$emit("loading",!1)}}},u=h,m=(i("69a7"),i("2877")),g=i("6544"),f=i.n(g),v=i("8336"),b=i("b0af"),x=i("99d9"),_=i("132d"),y=i("8860"),C=i("da13"),w=i("34c3"),F=i("5d23"),V=i("e449"),k=i("8654"),P=i("71d9"),S=i("2a7f"),j=i("3a2f"),$=Object(m["a"])(u,c,p,!1,null,"ec0cb63c",null),U=$.exports;f()($,{VBtn:v["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VIcon:_["a"],VList:y["a"],VListItem:C["a"],VListItemIcon:w["a"],VListItemTitle:F["c"],VMenu:V["a"],VTextField:k["a"],VToolbar:P["a"],VToolbarItems:S["a"],VTooltip:j["a"]});var I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"d-flex flex-column folders-tree-card",attrs:{flat:"",tile:"",width:"250","min-height":"380"}},[i("div",{staticClass:"grow scroll-x"},[i("v-treeview",{staticClass:"folders-tree",attrs:{open:t.open,active:t.active,items:t.items,search:t.filter,"load-children":t.readFolder,"item-key":"path","item-text":"basename",dense:"",activatable:"",transition:""},on:{"update:active":t.activeChanged},scopedSlots:t._u([{key:"prepend",fn:function(e){var a=e.item,s=e.open;return["dir"===a.type?i("v-icon",[t._v(t._s(s?"mdi-folder-open-outline":"mdi-folder-outline"))]):i("v-icon",[t._v(t._s(t.icons[a.extension.toLowerCase()]||t.icons["other"]))])]}},{key:"label",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.basename)+" "),"dir"===a.type?i("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.readFolder(a)}}},[i("v-icon",{staticClass:"pa-0 mdi-18px",attrs:{color:"grey lighten-1"}},[t._v("mdi-refresh")])],1):t._e()]}}])})],1),i("v-divider"),i("v-toolbar",{staticClass:"shrink",attrs:{dense:"",flat:""}},[i("v-text-field",{staticClass:"ml-n3",attrs:{solo:"",flat:"","hide-details":"",label:"Filter","prepend-inner-icon":"mdi-filter-outline"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{icon:""},on:{click:t.init}},a),[i("v-icon",[t._v("mdi-collapse-all-outline")])],1)]}}])},[i("span",[t._v("Collapse All")])])],1)],1)},O=[],T={props:{icons:Object,storage:String,path:String,endpoints:Object,axios:Function,refreshPending:Boolean},data(){return{open:[],active:[],items:[],filter:""}},methods:{init(){this.open=[],this.items=[],setTimeout(()=>{this.items=[{type:"dir",path:"/",basename:"root",extension:"",name:"root",children:[]}]},0),""!==this.path&&this.$emit("path-changed","")},async readFolder(t){this.$emit("loading",!0);let e=this.endpoints.list.url.replace(new RegExp("{storage}","g"),this.storage).replace(new RegExp("{path}","g"),t.path),i={url:e,method:this.endpoints.list.method||"get"},a=await this.axios.request(i);t.children=a.data.map(t=>("dir"===t.type&&(t.children=[]),t)),this.$emit("loading",!1)},activeChanged(t){this.active=t;let e="";t.length&&(e=t[0]),this.path!=e&&this.$emit("path-changed",e)},findItem(t){let e=[];e.push(this.items[0]);while(e.length>0){let i=e.pop();if(i.path==t)return i;if(i.children&&i.children.length)for(let t=0;t<i.children.length;t++)e.push(i.children[t])}return null}},watch:{storage(){this.init()},path(){this.active=[this.path],this.open.includes(this.path)||this.open.push(this.path)},async refreshPending(){if(this.refreshPending){let t=this.findItem(this.path);await this.readFolder(t),this.$emit("refreshed")}}},created(){this.init()}},L=T,A=(i("a09c"),i("ce7e")),B=i("eb2a"),E=Object(m["a"])(L,I,O,!1,null,"501ee1be",null),z=E.exports;f()(E,{VBtn:v["a"],VCard:b["a"],VDivider:A["a"],VIcon:_["a"],VTextField:k["a"],VToolbar:P["a"],VTooltip:j["a"],VTreeview:B["a"]});var M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"d-flex flex-column",attrs:{flat:"",tile:"","min-height":"380"}},[i("confirm",{ref:"confirm"}),t.path?t.isFile?i("v-card-text",{staticClass:"grow d-flex justify-center align-center"},[t._v("File: "+t._s(t.path))]):t.dirs.length||t.files.length?i("v-card-text",{staticClass:"grow"},[t.dirs.length?i("v-list",{attrs:{subheader:""}},[i("v-subheader",[t._v("Folders")]),t._l(t.dirs,(function(e){return i("v-list-item",{key:e.basename,staticClass:"pl-0",on:{click:function(i){return t.changePath(e.path)}}},[i("v-list-item-avatar",{staticClass:"ma-0"},[i("v-icon",[t._v("mdi-folder-outline")])],1),i("v-list-item-content",{staticClass:"py-2"},[i("v-list-item-title",{domProps:{textContent:t._s(e.basename)}})],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""},on:{click:function(i){return i.stopPropagation(),t.deleteItem(e)}}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-delete-outline")])],1),t._e()],1)],1)}))],2):t._e(),t.dirs.length&&t.files.length?i("v-divider"):t._e(),t.files.length?i("v-list",{attrs:{subheader:""}},[i("v-subheader",[t._v("Files")]),t._l(t.files,(function(e){return i("v-list-item",{key:e.basename,staticClass:"pl-0",on:{click:function(i){return t.changePath(e.path)}}},[i("v-list-item-avatar",{staticClass:"ma-0"},[i("v-icon",[t._v(t._s(t.icons[e.extension.toLowerCase()]||t.icons["other"]))])],1),i("v-list-item-content",{staticClass:"py-2"},[i("v-list-item-title",{domProps:{textContent:t._s(e.basename)}}),i("v-list-item-subtitle",[t._v(t._s(t.formatBytes(e.size)))])],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""},on:{click:function(i){return i.stopPropagation(),t.deleteItem(e)}}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-delete-outline")])],1),t._e()],1)],1)}))],2):t._e()],1):t.filter?i("v-card-text",{staticClass:"grow d-flex justify-center align-center grey--text py-5"},[t._v("No files or folders found")]):i("v-card-text",{staticClass:"grow d-flex justify-center align-center grey--text py-5"},[t._v("The folder is empty")]):i("v-card-text",{staticClass:"grow d-flex justify-center align-center grey--text"},[t._v("Select a folder or a file")]),t.path?i("v-divider"):t._e(),t._e(),t.path&&t.isDir?i("v-toolbar",{staticClass:"shrink",attrs:{dense:"",flat:""}},[i("v-text-field",{staticClass:"ml-n3",attrs:{solo:"",flat:"","hide-details":"",label:"Filter","prepend-inner-icon":"mdi-filter-outline"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._e(),i("v-btn",{attrs:{icon:""},on:{click:t.load}},[i("v-icon",[t._v("mdi-refresh")])],1)],1):t._e()],1)},N=[];function R(t,e=2){if(0===t)return"0 bytes";const i=1024,a=e<0?0:e,s=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(t)/Math.log(i));return parseFloat((t/Math.pow(i,n)).toFixed(a))+" "+s[n]}var D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:t.options.color,dense:"",flat:""}},[i("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.title))])],1),t.message?i("v-card-text",{staticClass:"pa-4 text-center",domProps:{innerHTML:t._s(t.message)}}):t._e(),i("v-card-actions",{staticClass:"pt-0"},[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:t.cancel}},[t._v("Cancel")]),i("v-btn",{attrs:{depressed:"",color:t.options.color},on:{click:t.agree}},[t._v("Yes")])],1)],1)],1)},q=[],J={data:()=>({dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"error",width:300}}),methods:{open(t,e,i){return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,i),new Promise((t,e)=>{this.resolve=t,this.reject=e})},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},Y=J,G=i("169a"),H=i("2fa4"),K=Object(m["a"])(Y,D,q,!1,null,null,null),Z=K.exports;f()(K,{VBtn:v["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VDialog:G["a"],VSpacer:H["a"],VToolbar:P["a"],VToolbarTitle:S["b"]});var Q={props:{icons:Object,storage:String,path:String,endpoints:Object,axios:Function,refreshPending:Boolean},components:{Confirm:Z},data(){return{items:[],filter:""}},computed:{dirs(){return this.items.filter(t=>"dir"===t.type&&t.basename.includes(this.filter))},files(){return this.items.filter(t=>"file"===t.type&&t.basename.includes(this.filter))},isDir(){return"/"===this.path[this.path.length-1]},isFile(){return!this.isDir}},methods:{formatBytes:R,changePath(t){this.$emit("path-changed",t)},async load(){if(this.$emit("loading",!0),this.isDir){let t=this.endpoints.list.url.replace(new RegExp("{storage}","g"),this.storage).replace(new RegExp("{path}","g"),this.path),e={url:t,method:this.endpoints.list.method||"get"},i=await this.axios.request(e);this.items=i.data}this.$emit("loading",!1)},async deleteItem(t){let e=await this.$refs.confirm.open("Delete",`Are you sure<br>you want to delete this ${"dir"===t.type?"folder":"file"}?<br><em>${t.basename}</em>`);if(e){this.$emit("loading",!0);let e=this.endpoints.delete.url.replace(new RegExp("{storage}","g"),this.storage).replace(new RegExp("{path}","g"),t.path),i={url:e,method:this.endpoints.delete.method||"post"};await this.axios.request(i),this.$emit("file-deleted"),this.$emit("loading",!1)}}},watch:{async path(){this.items=[],await this.load()},async refreshPending(){this.refreshPending&&(await this.load(),this.$emit("refreshed"))}}},W=Q,X=(i("256b"),i("1800")),tt=i("8270"),et=i("e0c7"),it=Object(m["a"])(W,M,N,!1,null,"9469f616",null),at=it.exports;f()(it,{VBtn:v["a"],VCard:b["a"],VCardText:x["b"],VDivider:A["a"],VIcon:_["a"],VList:y["a"],VListItem:C["a"],VListItemAction:X["a"],VListItemAvatar:tt["a"],VListItemContent:F["a"],VListItemSubtitle:F["b"],VListItemTitle:F["c"],VSubheader:et["a"],VTextField:k["a"],VToolbar:P["a"]});var st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-overlay",{attrs:{absolute:!0}},[i("v-card",{staticClass:"mx-auto",attrs:{flat:"",light:"",loading:t.loading}},[i("v-card-text",{staticClass:"py-3 text-center"},[i("div",[i("span",{staticClass:"grey--text"},[t._v("Upload to:")]),i("v-chip",{staticClass:"mx-1",attrs:{color:"info"}},[t._v(t._s(t.storage))]),i("v-chip",[t._v(t._s(t.path))])],1),t.maxUploadFilesCount?i("div",[i("span",{staticClass:"grey--text"},[t._v("Max files count: "+t._s(t.maxUploadFilesCount))])]):t._e(),t.maxUploadFileSize?i("div",[i("span",{staticClass:"grey--text"},[t._v("Max file size: "+t._s(t.formatBytes(t.maxUploadFileSize)))])]):t._e()]),i("v-divider"),t.listItems.length?i("v-card-text",{staticClass:"pa-0 files-list-wrapper"},[t.listItems.length?i("v-list",{attrs:{"two-line":""}},t._l(t.listItems,(function(e,a){return i("v-list-item",{key:a,attrs:{link:""}},[i("v-list-item-avatar",[e.preview?i("v-img",{attrs:{src:e.preview}}):i("v-icon",{staticClass:"mdi-36px",attrs:{color:"grey lighten-1"},domProps:{textContent:t._s(t.icons[e.extension]||"mdi-file")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),i("v-list-item-subtitle",[t._v(t._s(t.formatBytes(e.size))+" - "+t._s(e.type))])],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.remove(a)}}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-close")])],1)],1)],1)})),1):t._e()],1):i("v-card-text",{staticClass:"py-6 text-center"},[i("v-btn",{on:{click:function(e){return t.$refs.inputUpload.click()}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-plus-circle")]),t._v("Add files ")],1)],1),i("v-divider"),i("v-toolbar",{attrs:{dense:"",flat:""}},[i("div",{staticClass:"grow"}),i("v-btn",{staticClass:"mx-1",attrs:{text:""},on:{click:t.cancel}},[t._v("Cancel")]),i("v-btn",{staticClass:"mx-1",attrs:{depressed:"",color:"warning",disabled:!t.files},on:{click:t.clear}},[i("v-icon",[t._v("mdi-close")]),t._v("Clear ")],1),i("v-btn",{staticClass:"mx-1",attrs:{disabled:t.listItems.length>=t.maxUploadFilesCount,depressed:"",color:"info"},on:{click:function(e){return t.$refs.inputUpload.click()}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-plus-circle")]),t._v("Add Files "),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file",multiple:""},on:{change:t.add}})],1),i("v-btn",{staticClass:"ml-1",attrs:{depressed:"",color:"success",disabled:!t.files},on:{click:t.upload}},[t._v(" Upload "),i("v-icon",{attrs:{right:""}},[t._v("mdi-upload-outline")])],1)],1),i("v-overlay",{attrs:{value:t.uploading,absolute:!0,color:"white",opacity:"0.9"}},[i("v-progress-linear",{attrs:{height:"25",striped:"",rounded:"",reactive:""},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}},[i("strong",[t._v(t._s(Math.ceil(t.progress))+"%")])])],1)],1)],1)},nt=[];const ot=["image/png","image/jpeg"];var rt={props:{path:String,storage:String,endpoint:Object,files:{type:Array,default:()=>[]},icons:Object,axios:Function,maxUploadFilesCount:{type:Number,default:0},maxUploadFileSize:{type:Number,default:0}},data(){return{loading:!1,uploading:!1,progress:0,listItems:[]}},methods:{formatBytes:R,async filesMap(t){let e=Array.from(t).map(t=>{let e={name:t.name,type:t.type,size:t.size,extension:t.name.split(".").pop()};return new Promise(i=>{if(!ot.includes(e.type))return i(e);var a=new FileReader;a.onload=function(t){e.preview=t.target.result,i(e)},a.readAsDataURL(t)})});return await Promise.all(e)},async add(t){let e=Array.from(t.target.files);this.$emit("add-files",e),this.$refs.inputUpload.value=""},remove(t){this.$emit("remove-file",t),this.listItems.splice(t,1)},clear(){this.$emit("clear-files"),this.listItems=[]},cancel(){this.$emit("cancel")},async upload(){let t=new FormData;for(let a of this.files)t.append("files",a,a.name);let e=this.endpoint.url.replace(new RegExp("{storage}","g"),this.storage).replace(new RegExp("{path}","g"),this.path),i={url:e,method:this.endpoint.method||"post",data:t,onUploadProgress:t=>{this.progress=t.loaded/t.total*100}};this.uploading=!0;await this.axios.request(i);this.uploading=!1,this.$emit("uploaded")}},watch:{files:{deep:!0,immediate:!0,async handler(){this.loading=!0,this.listItems=await this.filesMap(this.files),this.loading=!1}}}},lt=rt,dt=(i("a9de"),i("cc20")),ct=i("adda"),pt=i("a797"),ht=i("8e36"),ut=Object(m["a"])(lt,st,nt,!1,null,"772a077c",null),mt=ut.exports;f()(ut,{VBtn:v["a"],VCard:b["a"],VCardText:x["b"],VChip:dt["a"],VDivider:A["a"],VIcon:_["a"],VImg:ct["a"],VList:y["a"],VListItem:C["a"],VListItemAction:X["a"],VListItemAvatar:tt["a"],VListItemContent:F["a"],VListItemSubtitle:F["b"],VListItemTitle:F["c"],VOverlay:pt["a"],VProgressLinear:ht["a"],VToolbar:P["a"]});const gt=[{name:"Local",code:"local",icon:"mdi-folder-multiple-outline"},{name:"test 1",code:"1",icon:"mdi-amazon-drive"}],ft={list:{url:"/storage/{storage}/list?path={path}",method:"get"},upload:{url:"/storage/{storage}/upload?path={path}",method:"post"},mkdir:{url:"/storage/{storage}/mkdir?path={path}",method:"post"},delete:{url:"/storage/{storage}/delete?path={path}",method:"post"}},vt={zip:"mdi-folder-zip-outline",rar:"mdi-folder-zip-outline",htm:"mdi-language-html5",html:"mdi-language-html5",js:"mdi-nodejs",json:"mdi-json",md:"mdi-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",jpg:"mdi-file-image",jpeg:"mdi-file-image",mp4:"mdi-filmstrip",mkv:"mdi-filmstrip",avi:"mdi-filmstrip",wmv:"mdi-filmstrip",mov:"mdi-filmstrip",txt:"mdi-file-document-outline",xls:"mdi-file-excel",other:"mdi-file-outline"};var bt={components:{Toolbar:U,Tree:z,List:at,Upload:mt},model:{prop:"path",event:"change"},props:{storages:{type:String,default:()=>gt.map(t=>t.code).join(",")},storage:{type:String,default:"local"},tree:{type:Boolean,default:!0},icons:{type:Object,default:()=>vt},endpoints:{type:Object,default:()=>ft},axios:{type:Function},axiosConfig:{type:Object,default:()=>{}},maxUploadFilesCount:{type:Number,default:0},maxUploadFileSize:{type:Number,default:0}},data(){return{loading:0,path:"",activeStorage:null,uploadingFiles:!1,refreshPending:!1,axiosInstance:null}},computed:{storagesArray(){let t=this.storages.split(","),e=[];return t.forEach(t=>{e.push(gt.find(e=>e.code==t))}),e}},methods:{loadingChanged(t){t?this.loading++:this.loading>0&&this.loading--},storageChanged(t){this.activeStorage=t},addUploadingFiles(t){t=Array.from(t),this.maxUploadFileSize&&(t=t.filter(t=>t.size<=this.maxUploadFileSize)),!1===this.uploadingFiles&&(this.uploadingFiles=[]),this.maxUploadFilesCount&&this.uploadingFiles.length+t.length>this.maxUploadFilesCount&&(t=t.slice(0,this.maxUploadFilesCount-this.uploadingFiles.length)),this.uploadingFiles.push(...t)},removeUploadingFile(t){this.uploadingFiles.splice(t,1)},uploaded(){this.uploadingFiles=!1,this.refreshPending=!0},pathChanged(t){this.path=t,this.$emit("change",t)}},created(){this.activeStorage=this.storage,this.axiosInstance=this.axios||d.a.create(this.axiosConfig)},mounted(){this.path||this.tree&&this.$vuetify.breakpoint.smAndUp||this.pathChanged("/")}},xt=bt,_t=i("62ad"),yt=i("0fd9"),Ct=Object(m["a"])(xt,o,r,!1,null,"d47ce0e0",null),wt=Ct.exports;f()(Ct,{VCard:b["a"],VCol:_t["a"],VDivider:A["a"],VRow:yt["a"]});var Ft={name:"App",components:{File:wt},data:()=>({})},Vt=Ft,kt=i("7496"),Pt=i("40dc"),St=i("f6c4"),jt=Object(m["a"])(Vt,s,n,!1,null,null,null),$t=jt.exports;f()(jt,{VApp:kt["a"],VAppBar:Pt["a"],VMain:St["a"],VSpacer:H["a"]});var Ut=i("f309");a["a"].use(Ut["a"]);var It=new Ut["a"]({});a["a"].config.productionTip=!1,new a["a"]({vuetify:It,render:function(t){return t($t)}}).$mount("#app")},"583e":function(t,e,i){},"69a7":function(t,e,i){"use strict";i("76f5")},"76f5":function(t,e,i){},"7bd6":function(t,e,i){},a09c:function(t,e,i){"use strict";i("4082")},a9de:function(t,e,i){"use strict";i("7bd6")}});
//# sourceMappingURL=app.9b8647a3.js.map